<!DOCTYPE HTML>
<html>
<head>

<title>Video/Audio</title>

<link rel='stylesheet' type='text/css' href='../css/player.css' />
<link rel='stylesheet' type='text/css' href='../css/login.css' />
<style type="text/css">

</style>

<script src='../js/jquery.js'></script>
<script src='../js/api.js'></script>
<script src='../js/consts.js'></script>
<script src='../js/utils.js'></script>
<script src='../js/content.js'></script>
<script src='../js/cusVideo.js'></script>

<script type='text/javascript'>


var lecturus = lecturus || {}; 
var vit;



function setVideoSrc(videoId){
	// $("#vitPlayer source").attr("src",consts.SERVER+"/uploads/vits/"+videoId+"/video"+getUrlParameter("videoId")+".mp4");
	$("#vitPlayer source").attr("src",consts.SERVER+"/uploads/videos/video6.mp4");
}


var initCallback = function( data ) {
	contents = data.data;
	console.log(data.data);
	for (var i = 0; i < contents.length; i++) {
		// contents[i].type="text";
	}
	printData();
	$('video').on("timeupdate", setPreview);
}

var updateCallback = function( data ) {
	for (var i = 0; i < contents.length; i++) {
		if (contents[i].id == data.text_id){
			for (var key in data){
				contents[i][key] = data[key];
			}
			break;
		}
	}
	printData();
}

function _getPosts(callback){
	var formData = {	
		'filters[video_id]' : _videoId,
		'debug' : true
	};

	var posting = $.get( "http://localhost:3000/content/get_content", formData );

	posting.done(callback);
}

function startPlayer(){
	vit = $('video')[0];
	$('video').videoPlayer({
		'playerWidth' : 0.95,
		'videoClass' : 'video',
	});
}

$(document).ready(function() {
	startPlayer()

	_videoId = getUrlParameter("videoId");

	setVideoSrc(_videoId);

	
	_getPosts(initCallback);

});

$(function(){
  $("#header").load("header.html"); 
});

</script>

</head>
<body style="background-color:#f1f1f1;">

<!-- domment -->
	<div id="header"></div>

	<div id="wrapper" style="padding: 20px;box-sizing: border-box;">

		<div class="container" style="float:left;" >
			<video id="vitPlayer" style="height: 320px;width: 640px;object-fit: contain;object-position: 50% 50%;">
				<source type="video/mp4">
			</video>

			<div id="preview" style="margin:0 20px;display:inline-block;position: absolute;">

			</div>

		</div>

		<div id="contents" style="padding: 20px;box-sizing: border-box;width:640px;background-color:#fff">
		</div>
	</div>

</body>
</html>